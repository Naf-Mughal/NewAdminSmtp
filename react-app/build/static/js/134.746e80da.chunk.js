"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[134],{6134:(e,l,s)=>{s.r(l),s.d(l,{default:()=>P});var n=s(9950),t=s(6491),i=s(5769),d=s(4075),a=s(1671),o=s(1320),r=s(9780),c=s(6780),u=s(9213),x=s(7251),v=s(2053),h=s(2235),m=s(1295),p=s(8429),j=s(5277),g=s(2741),f=s(3464),b=s(33),A=s(5333),w=s(8170),S=s(6319),N=s(4414);function y(e,l,s){return l[s]<e[s]?-1:l[s]>e[s]?1:0}const C=[{id:"id",label:"Mail Id"},{id:"date",label:"Date"},{id:"subject",label:"Mail Subject"},{id:"from",label:"Mail Sender"},{id:"status",label:"Status"},{id:"tag",label:"Tags"},{id:"actions",label:"Details"}];function k(e){const{order:l,orderBy:s,onRequestSort:n}=e;return(0,N.jsx)(r.A,{children:(0,N.jsx)(u.A,{children:C.map((e=>{return(0,N.jsx)(a.A,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:s===e.id&&l,children:(0,N.jsxs)(x.A,{active:s===e.id,direction:s===e.id?l:"asc",onClick:(i=e.id,e=>{n(e,i)}),children:[e.label,s===e.id?(0,N.jsx)(t.A,{component:"span",sx:m.A,children:"desc"===l?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))})})}const M=e=>{var l,s,n,t,i,d;const{onClose:a,open:o,message:r}=e,c=()=>{a()};return(0,N.jsxs)(f.A,{onClose:c,open:o,maxWidth:"lg",children:[(0,N.jsxs)(b.A,{className:"flex items-center justify-between px-4 py-2",children:[(0,N.jsxs)("span",{className:"flex gap-1 items-center text-[#929292] text-xl font-bold",children:["Mail Details - ",null===r||void 0===r?void 0:r.id]}),(0,N.jsx)(A.A,{"aria-label":"close",onClick:c,sx:{position:"absolute",right:8,top:8,color:"#929292"},children:(0,N.jsx)(S.A,{})})]}),(0,N.jsxs)(w.A,{className:"xl:min-w-[900px] md:w-[80%] w-[95%] gap-4 flex flex-col",children:[(0,N.jsxs)("div",{className:"!flex !flex-col !gap-2 !w-full",children:[(0,N.jsxs)("div",{className:"!flex !justify-between",children:[(0,N.jsxs)("h1",{className:"!flex !items-center !gap-1 !text-lg !font-bold !text-white",children:["Subject: ",(0,N.jsx)("span",{className:"!font-normal !text-[#929292]",children:null===r||void 0===r||null===(l=r.envelope)||void 0===l?void 0:l.subject})]}),(0,N.jsx)("h5",{className:"!flex !items-center !gap-1 !text-xs !text-[#929292]",children:null===r||void 0===r||null===(s=r.envelope)||void 0===s?void 0:s.date})]}),(0,N.jsxs)("h5",{className:"!flex !items-center !gap-1 !text-sm !font-bold !text-white",children:["From: ",(0,N.jsx)("span",{className:"!font-normal !text-[#929292]",children:null===r||void 0===r||null===(n=r.envelope)||void 0===n||null===(t=n.from[0])||void 0===t?void 0:t.address})]}),(0,N.jsxs)("h5",{className:"!flex !items-center !gap-1 !text-sm !font-bold !text-white",children:["To: ",(0,N.jsx)("span",{className:"!font-normal !text-[#929292]",children:null===r||void 0===r||null===(i=r.envelope)||void 0===i||null===(d=i.to[0])||void 0===d?void 0:d.address})]})]}),(0,N.jsx)("hr",{}),(0,N.jsx)("div",{className:"!w-full !flex !flex-col !gap-2",children:(0,N.jsx)("div",{dangerouslySetInnerHTML:{__html:null===r||void 0===r?void 0:r.mail}})})]})]})};function P(){const e=(0,p.Zp)(),[l,s]=n.useState("asc"),[r,x]=n.useState("id"),[m,f]=n.useState([]),[b,A]=n.useState(0),[w,S]=n.useState(10),[C,P]=n.useState([]),[T,I]=n.useState([]),[D,z]=n.useState(!1),[E,R]=n.useState(!1),{parmsEmail:q}=(0,p.g)(),B=e=>{var l,s=Number(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)||e;S(s),A(0)};async function O(){try{var e=[];await g.A.get("http://63.250.47.159:8080/api/mail/".concat(q)).then((l=>{var s;null===l||void 0===l||null===(s=l.data)||void 0===s||s.forEach(((l,s)=>{var n;e.push({id:null===l||void 0===l||null===(n=l.message)||void 0===n?void 0:n.id,message:null===l||void 0===l?void 0:l.message,seen:null===l||void 0===l?void 0:l.seen,tag:null===l||void 0===l?void 0:l.tag})}))})),P(e)}catch(l){}}const W=b>0?Math.max(0,(1+b)*w-C.length):0;var _=n.useMemo((()=>function(e,l){const s=e.map(((e,l)=>[e,l]));return s.sort(((e,s)=>{const n=l(e[0],s[0]);return 0!==n?n:e[1]-s[1]})),s.map((e=>e[0]))}(C,function(e,l){return"desc"===e?(e,s)=>y(e,s,l):(e,s)=>-y(e,s,l)}(l,r)).slice(b*w,b*w+w)),[l,r,b,w]);return n.useEffect((()=>{O().then((()=>{B(5)}));const e=setInterval((()=>{O()}),1e4);return()=>{clearInterval(e)}}),[!1]),200===T&&(e(0),I(0)),(0,N.jsxs)(t.A,{sx:{width:"100%"},children:[(0,N.jsx)(M,{open:D,onClose:()=>{z(!1)},message:E}),(0,N.jsxs)(h.A,{sx:{width:"100%",mb:2,mt:2},children:[(0,N.jsx)("div",{className:"flex justify-between items-center h-20 px-4",children:(0,N.jsx)(v.A,{sx:{flex:"1 1 100%"},variant:"h2",id:"tableTitle",component:"div",children:"Mails"})}),(0,N.jsx)(o.A,{children:(0,N.jsxs)(i.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[(0,N.jsx)(k,{numSelected:m.length,order:l,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=C.map((e=>e.id));f(e)}else f([])},onRequestSort:(e,n)=>{s(r===n&&"asc"===l?"desc":"asc"),x(n)},rowCount:C.length}),(0,N.jsxs)(d.A,{children:[_.map(((e,l)=>{var s,n,t,i,d,o,r;return(0,N.jsxs)(u.A,{tabIndex:-1,children:[(0,N.jsx)(a.A,{component:"th",scope:"row",children:e.id}),(0,N.jsx)(a.A,{children:null===e||void 0===e||null===(s=e.message)||void 0===s||null===(n=s.envelope)||void 0===n?void 0:n.date}),(0,N.jsx)(a.A,{children:null===e||void 0===e||null===(t=e.message)||void 0===t||null===(i=t.envelope)||void 0===i?void 0:i.subject}),(0,N.jsx)(a.A,{children:null===e||void 0===e||null===(d=e.message)||void 0===d||null===(o=d.envelope)||void 0===o||null===(r=o.from[0])||void 0===r?void 0:r.address}),(0,N.jsx)(a.A,{children:null!==e&&void 0!==e&&e.seen?"Seen":"Not Seen"}),(0,N.jsx)(a.A,{children:""===(null===e||void 0===e?void 0:e.tag)?"No Tags":null===e||void 0===e?void 0:e.tag}),(0,N.jsx)(a.A,{children:(0,N.jsxs)("button",{className:"text-white bg-[#142733] flex justify-center items-center text-xl gap-4 border rounded-md border-transparent px-4 py-2",onClick:()=>{var l;l=null===e||void 0===e?void 0:e.message,z(!0),R(l)},children:["Open",(0,N.jsx)(j.ApK,{})]})})]},e.id)})),W>0&&(0,N.jsx)(u.A,{style:{height:53*W},children:(0,N.jsx)(a.A,{colSpan:6})})]})]})}),(0,N.jsx)(c.A,{rowsPerPageOptions:[5,10,25],component:"div",count:C.length,rowsPerPage:w,page:b,onPageChange:(e,l)=>{A(l)},onRowsPerPageChange:B})]})]})}}}]);