"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[134],{4979:(e,l,s)=>{s.d(l,{A:()=>d});var n=s(3464),t=s(8170),i=s(4414);const d=e=>{const{open:l}=e;return(0,i.jsx)(n.A,{open:l,maxWidth:"lg",children:(0,i.jsx)(t.A,{className:"p-16",children:(0,i.jsxs)("div",{class:"lds-roller",children:[(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})})})}},6134:(e,l,s)=>{s.r(l),s.d(l,{default:()=>T});var n=s(9950),t=s(6491),i=s(5769),d=s(4075),a=s(1671),o=s(1320),r=s(9780),c=s(6780),x=s(9213),u=s(7251),v=s(2053),h=s(2235),m=s(1295),j=s(8429),p=s(5277),g=s(2741),f=s(3464),b=s(33),A=s(5333),w=s(8170),S=s(6319),N=s(4979),y=s(4414);function C(e,l,s){return l[s]<e[s]?-1:l[s]>e[s]?1:0}const k=[{id:"id",label:"Mail Id"},{id:"date",label:"Date"},{id:"subject",label:"Mail Subject"},{id:"from",label:"Mail Sender"},{id:"status",label:"Status"},{id:"tag",label:"Tags"},{id:"actions",label:"Details"}];function M(e){const{order:l,orderBy:s,onRequestSort:n}=e;return(0,y.jsx)(r.A,{children:(0,y.jsx)(x.A,{children:k.map((e=>{return(0,y.jsx)(a.A,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"normal",sortDirection:s===e.id&&l,children:(0,y.jsxs)(u.A,{active:s===e.id,direction:s===e.id?l:"asc",onClick:(i=e.id,e=>{n(e,i)}),children:[e.label,s===e.id?(0,y.jsx)(t.A,{component:"span",sx:m.A,children:"desc"===l?"sorted descending":"sorted ascending"}):null]})},e.id);var i}))})})}const P=e=>{var l,s,n,t,i,d;const{onClose:a,open:o,message:r}=e,c=()=>{a()};return(0,y.jsxs)(f.A,{onClose:c,open:o,maxWidth:"lg",children:[(0,y.jsxs)(b.A,{className:"flex items-center justify-between px-4 py-2",children:[(0,y.jsxs)("span",{className:"flex gap-1 items-center text-[#929292] text-xl font-bold",children:["Mail Details - ",null===r||void 0===r?void 0:r.id]}),(0,y.jsx)(A.A,{"aria-label":"close",onClick:c,sx:{position:"absolute",right:8,top:8,color:"#929292"},children:(0,y.jsx)(S.A,{})})]}),(0,y.jsxs)(w.A,{className:"xl:min-w-[900px] md:w-[80%] w-[95%] gap-4 flex flex-col",children:[(0,y.jsxs)("div",{className:"!flex !flex-col !gap-2 !w-full",children:[(0,y.jsxs)("div",{className:"!flex !justify-between",children:[(0,y.jsxs)("h1",{className:"!flex !items-center !gap-1 !text-lg !font-bold !text-white",children:["Subject: ",(0,y.jsx)("span",{className:"!font-normal !text-[#929292]",children:null===r||void 0===r||null===(l=r.envelope)||void 0===l?void 0:l.subject})]}),(0,y.jsx)("h5",{className:"!flex !items-center !gap-1 !text-xs !text-[#929292]",children:null===r||void 0===r||null===(s=r.envelope)||void 0===s?void 0:s.date})]}),(0,y.jsxs)("h5",{className:"!flex !items-center !gap-1 !text-sm !font-bold !text-white",children:["From: ",(0,y.jsx)("span",{className:"!font-normal !text-[#929292]",children:null===r||void 0===r||null===(n=r.envelope)||void 0===n||null===(t=n.from[0])||void 0===t?void 0:t.address})]}),(0,y.jsxs)("h5",{className:"!flex !items-center !gap-1 !text-sm !font-bold !text-white",children:["To: ",(0,y.jsx)("span",{className:"!font-normal !text-[#929292]",children:null===r||void 0===r||null===(i=r.envelope)||void 0===i||null===(d=i.to[0])||void 0===d?void 0:d.address})]})]}),(0,y.jsx)("hr",{}),(0,y.jsx)("div",{className:"!w-full !flex !flex-col !gap-2",children:(0,y.jsx)("div",{dangerouslySetInnerHTML:{__html:null===r||void 0===r?void 0:r.mail}})})]})]})};function T(){const e=(0,j.Zp)(),[l,s]=n.useState("asc"),[r,u]=n.useState("id"),[m,f]=n.useState([]),[b,A]=n.useState(0),[w,S]=n.useState(10),[k,T]=n.useState([]),[I,D]=n.useState([]),[z,E]=n.useState(!1),[R,W]=n.useState(!0),[q,B]=n.useState(!1),{parmsEmail:O}=(0,j.g)(),_=e=>{var l,s=Number(null===e||void 0===e||null===(l=e.target)||void 0===l?void 0:l.value)||e;S(s),A(0)};async function F(){try{var e=[];await g.A.get("http://63.250.47.159:8080/api/mail/".concat(O)).then((l=>{var s;null===l||void 0===l||null===(s=l.data)||void 0===s||s.forEach(((l,s)=>{var n;e.push({id:null===l||void 0===l||null===(n=l.message)||void 0===n?void 0:n.id,message:null===l||void 0===l?void 0:l.message,seen:null===l||void 0===l?void 0:l.seen,tag:null===l||void 0===l?void 0:l.tag})}))})),T(e)}catch(l){}}const H=b>0?Math.max(0,(1+b)*w-k.length):0;var K=n.useMemo((()=>function(e,l){const s=e.map(((e,l)=>[e,l]));return s.sort(((e,s)=>{const n=l(e[0],s[0]);return 0!==n?n:e[1]-s[1]})),s.map((e=>e[0]))}(k,function(e,l){return"desc"===e?(e,s)=>C(e,s,l):(e,s)=>-C(e,s,l)}(l,r)).slice(b*w,b*w+w)),[l,r,b,w]);return n.useEffect((()=>{F().then((()=>{_(5),W(!1)}));const e=setInterval((()=>{F()}),1e4);return()=>{clearInterval(e)}}),[!1]),200===I&&(e(0),D(0)),(0,y.jsxs)(t.A,{sx:{width:"100%"},children:[(0,y.jsx)(P,{open:z,onClose:()=>{E(!1)},message:q}),(0,y.jsx)(N.A,{open:R}),(0,y.jsxs)(h.A,{sx:{width:"100%",mb:2,mt:2},children:[(0,y.jsx)("div",{className:"flex justify-between items-center h-20 px-4",children:(0,y.jsx)(v.A,{sx:{flex:"1 1 100%"},variant:"h2",id:"tableTitle",component:"div",children:"Mails"})}),(0,y.jsx)(o.A,{children:(0,y.jsxs)(i.A,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[(0,y.jsx)(M,{numSelected:m.length,order:l,orderBy:r,onSelectAllClick:e=>{if(e.target.checked){const e=k.map((e=>e.id));f(e)}else f([])},onRequestSort:(e,n)=>{s(r===n&&"asc"===l?"desc":"asc"),u(n)},rowCount:k.length}),(0,y.jsxs)(d.A,{children:[K.map(((e,l)=>{var s,n,t,i,d,o,r;return(0,y.jsxs)(x.A,{tabIndex:-1,children:[(0,y.jsx)(a.A,{component:"th",scope:"row",children:e.id}),(0,y.jsx)(a.A,{children:null===e||void 0===e||null===(s=e.message)||void 0===s||null===(n=s.envelope)||void 0===n?void 0:n.date}),(0,y.jsx)(a.A,{children:null===e||void 0===e||null===(t=e.message)||void 0===t||null===(i=t.envelope)||void 0===i?void 0:i.subject}),(0,y.jsx)(a.A,{children:null===e||void 0===e||null===(d=e.message)||void 0===d||null===(o=d.envelope)||void 0===o||null===(r=o.from[0])||void 0===r?void 0:r.address}),(0,y.jsx)(a.A,{children:null!==e&&void 0!==e&&e.seen?"Seen":"Not Seen"}),(0,y.jsx)(a.A,{children:""===(null===e||void 0===e?void 0:e.tag)?"No Tags":null===e||void 0===e?void 0:e.tag}),(0,y.jsx)(a.A,{children:(0,y.jsxs)("button",{className:"text-white bg-[#142733] flex justify-center items-center text-xl gap-4 border rounded-md border-transparent px-4 py-2",onClick:()=>{var l;l=null===e||void 0===e?void 0:e.message,E(!0),B(l)},children:["Open",(0,y.jsx)(p.ApK,{})]})})]},e.id)})),H>0&&(0,y.jsx)(x.A,{style:{height:53*H},children:(0,y.jsx)(a.A,{colSpan:6})})]})]})}),(0,y.jsx)(c.A,{rowsPerPageOptions:[5,10,25],component:"div",count:k.length,rowsPerPage:w,page:b,onPageChange:(e,l)=>{A(l)},onRowsPerPageChange:_})]})]})}}}]);